{"version":3,"sources":["webpack:///./src/components/Tags.vue?bec8","webpack:///src/components/Tags.vue","webpack:///./src/components/Tags.vue?4c02","webpack:///./src/components/Tags.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","resource","tags","length","_l","tag","key","name","staticClass","attrs","color","_v","_s","on","$event","stopPropagation","tag_to_resource","scopedSlots","_u","fn","ref","_g","model","value","callback","$$v","tag_dialog","expression","new_tag_name","trim","new_tag_color","new_tag","_e","staticRenderFns","props","type","Object","default","show_tags","data","tag_colors","computed","available_tags","undefined","filter","methods","url","$refs","tag_name_field","reset","load_tags","payload","resource_id","_id","resource_type","mounted","component"],"mappings":"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","file":"js/chunk-2d0ba8bb.b4b506ae.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',[(_vm.resource.tags && _vm.resource.tags.length > 0)?_c('v-flex',[_c('v-flex',_vm._l((_vm.resource.tags),function(tag){return _c('v-btn',{key:tag.name,staticClass:\"font-weight-bold text-lowercase\",attrs:{\"color\":tag.color,\"small\":\"\",\"round\":\"\"}},[_vm._v(\" \"+_vm._s(tag.name)+\" \"),_c('v-icon',{attrs:{\"right\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.tag_to_resource(tag)}}},[_vm._v(\"mdi-close-circle\")])],1)}),1)],1):_c('v-flex',[_vm._v(\"No tags\")]),(_vm.show_tags)?_c('v-flex',[(_vm.tags.length > 0)?_c('v-flex',[_c('v-label',[_vm._v(\"Available tags\")]),_c('v-flex',_vm._l((_vm.available_tags),function(tag){return _c('v-btn',{key:tag.name,staticClass:\"font-weight-bold text-lowercase\",attrs:{\"color\":tag.color,\"small\":\"\",\"round\":\"\"},on:{\"click\":function($event){return _vm.tag_to_resource(tag)}}},[_vm._v(_vm._s(tag.name))])}),1)],1):_c('v-flex',[_vm._v(\"No tags yet\")]),_c('v-flex',[_c('v-dialog',{attrs:{\"width\":\"250\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"flat\":\"\",\"icon\":\"\"}},on),[_c('v-icon',{attrs:{\"color\":\"green\"}},[_vm._v(\"mdi-plus\")])],1)]}}],null,false,3356724318),model:{value:(_vm.tag_dialog),callback:function ($$v) {_vm.tag_dialog=$$v},expression:\"tag_dialog\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Name\")]),_c('v-card-text',[_c('v-text-field',{ref:\"tag_name_field\",attrs:{\"outline\":\"\",\"single-line\":\"\",\"required\":\"\",\"label\":\"no spaces, only alpha\"},model:{value:(_vm.new_tag_name),callback:function ($$v) {_vm.new_tag_name=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"new_tag_name\"}})],1),_c('v-divider'),_c('v-card-title',[_vm._v(\"Color\")]),_c('v-layout',{attrs:{\"row\":\"\",\"pb-3\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},_vm._l((_vm.tag_colors),function(color){return _c('v-btn',{key:color,attrs:{\"value\":color,\"fab\":\"\",\"dark\":\"\",\"small\":\"\",\"color\":color},on:{\"click\":function($event){$event.stopPropagation();_vm.new_tag_color = color}}})}),1)],1),_c('v-divider'),_c('v-card-actions',[_c('v-flex',[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.new_tag()}}},[_vm._v(\"add\")])],1)],1)],1)],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-flex>\n    <v-flex v-if=\"resource.tags && resource.tags.length > 0\">\n      <v-flex>\n        <v-btn\n          v-for=\"tag in resource.tags\"\n          :key=\"tag.name\"\n          class=\"font-weight-bold text-lowercase\"\n          :color=\"tag.color\"\n          small\n          round\n        >\n          {{ tag.name }}\n          <v-icon @click.stop=\"tag_to_resource(tag)\" right>mdi-close-circle</v-icon>\n        </v-btn>\n      </v-flex>\n    </v-flex>\n    <v-flex v-else>No tags</v-flex>\n\n    <v-flex v-if=\"show_tags\">\n      <v-flex v-if=\"tags.length > 0\">\n        <v-label>Available tags</v-label>\n        <v-flex>\n          <v-btn\n            v-for=\"tag in available_tags\"\n            :key=\"tag.name\"\n            :color=\"tag.color\"\n            class=\"font-weight-bold text-lowercase\"\n            small\n            round\n            @click=\"tag_to_resource(tag)\"\n          >{{ tag.name }}</v-btn>\n        </v-flex>\n      </v-flex>\n      <v-flex v-else>No tags yet</v-flex>\n      <v-flex>\n        <v-dialog v-model=\"tag_dialog\" width=\"250\">\n          <template v-slot:activator=\"{ on }\">\n            <v-btn flat icon v-on=\"on\">\n              <v-icon color=\"green\">mdi-plus</v-icon>\n            </v-btn>\n          </template>\n          <v-card>\n            <v-card-title>Name</v-card-title>\n            <v-card-text>\n              <v-text-field\n                outline\n                single-line\n                required\n                v-model.trim=\"new_tag_name\"\n                label=\"no spaces, only alpha\"\n                ref=\"tag_name_field\"\n              ></v-text-field>\n            </v-card-text>\n            <v-divider></v-divider>\n            <v-card-title>Color</v-card-title>\n            <v-layout row pb-3>\n              <v-flex xs12>\n                <v-btn\n                  v-for=\"color in tag_colors\"\n                  :key=\"color\"\n                  :value=\"color\"\n                  fab\n                  dark\n                  small\n                  :color=\"color\"\n                  @click.stop=\"new_tag_color = color\"\n                ></v-btn>\n              </v-flex>\n            </v-layout>\n            <v-divider></v-divider>\n            <v-card-actions>\n              <v-flex>\n                <v-btn color=\"primary\" @click.stop=\"new_tag()\">add</v-btn>\n              </v-flex>\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n      </v-flex>\n    </v-flex>\n  </v-flex>\n</template>\n\n<script>\nimport api_call from \"../utils/api\";\n\nexport default {\n  name: \"Tags\",\n  props: {\n    resource: {\n      type: Object,\n      default: {}\n    },\n    show_tags: { type: Boolean, default: false }\n  },\n  data() {\n    return {\n      tags: [],\n      tag_dialog: false,\n      tag_colors: [],\n      new_tag_name: null,\n      new_tag_color: \"blue\"\n    };\n  },\n\n  computed: {\n    available_tags: function() {\n      if (this.resource.tags === undefined) {\n        return this.tags;\n      }\n\n      return this.tags.filter(\n        that_tag =>\n          !this.resource.tags.some(elem => elem.name === that_tag.name)\n      );\n    }\n  },\n  methods: {\n    new_tag() {\n      this.tag_dialog = !this.tag_dialog;\n      let tag = { name: this.new_tag_name, color: this.new_tag_color };\n      let payload = {\n        url: \"/api/add_new_tag\",\n        tag: tag\n      };\n      api_call(payload);\n\n      this.new_tag_color = \"blue\";\n      this.$refs.tag_name_field.reset();\n      this.load_tags();\n    },\n\n    load_tags() {\n      let payload = {\n        url: \"/api/get_tags\"\n      };\n      api_call(payload).then(resp => (this.tags = resp.data.tags));\n\n      payload = {\n        url: \"/api/get_tag_colors\"\n      };\n      api_call(payload).then(resp => (this.tag_colors = resp.data.tag_colors));\n    },\n\n    tag_to_resource(tag) {\n      let payload = {\n        url: \"/api/tag_to_resource\",\n        resource_id: this.resource._id,\n        resource_type: this.resource.resource_type,\n        tag: tag\n      };\n      api_call(payload).then(resp => {\n        this.$emit(\"shake\");\n      });\n    }\n  },\n  mounted: function() {\n    this.load_tags();\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tags.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tags.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tags.vue?vue&type=template&id=07b1399f&\"\nimport script from \"./Tags.vue?vue&type=script&lang=js&\"\nexport * from \"./Tags.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}